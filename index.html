<!DOCTYPE html>
<html>
<head>
    <title>Register Form | STUDAK</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
    <h1>Регистрация</h1>

    <form id="form">
        <div class="form-group">
            <label for="stud_num">Номер студенческого билета (5 цифр)</label><br>
            <input type="number" id="stud_num" name="stud_num" required><br>
        </div>
        <div class="form-group">
            <label for="surname">Фамилия:</label><br>
            <input type="text" id="surname" name="surname"><br>
        </div>
        <div class="form-group">
            <label for="name">Имя:</label><br>
            <input type="text" id="name" name="name"><br>
        </div>
        <div class="form-group">
            <label for="patronymic">Отчество:</label><br>
            <input type="text" id="patronymic" name="patronymic"><br>
        </div>
        <div class="form-group">
            <label for="date_birth">Дата рождения:</label><br>
            <input type="date" id="date_birth" name="date_birth" required><br>
        </div>
        <div>
            <br><label for="name">Нажимая кнопку "Зарегистрироваться" вы соглашаетесь на обработку персональных данных в соответствии с требованиями Федерального закона от 27.07.2006 № 152-ФЗ «О персональных данных»</label><br>
        </div>
        <div id="error"></div>
        <div class="submit-button">
            <button id="regBtn">Зарегистрироваться</button>
        </div>
    </form>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        let tgAppReg = window.Telegram.WebApp;
        let regBtn = document.getElementById("regBtn");
        tg.expand();

        regBtn.addEventListener("click", () => {
            document.getElementById("error").innerText = "";

            let stud_num = document.getElementById("stud_num").value;
            let surname = document.getElementById("surname").value;
            let name = document.getElementById("name").value;
            let patronymic = document.getElementById("patronymic").value;
            let date_birth = document.getElementById("date_birth").value;
            let time_end = document.getElementById("time_end").value;
            let place = document.getElementById("place").value;
            let photo = document.getElementById("photo").value;
            let rate = document.getElementById("rate").value;

            let data = {
                stud_num: stud_num,
                surname: surname,
                name: name,
                patronymic: patronymic,
                date_birth: date_birth
            }

            tgAppReg.sendData(JSON.stringify(data));
            tgAppReg.close();
        })
    </script>
</body>
</html>
